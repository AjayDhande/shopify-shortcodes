{% capture loadnew %}{{ load | replace: '<!--[', '[' }}{% endcapture %}{% capture loadnew %}{{ loadnew | replace: ']-->', ']' }}{% endcapture %}{% capture loadnew %}{{ loadnew | replace: ']</p>', ']' }}{% endcapture %}{% capture loadnew %}{{ loadnew | replace: '<p>[', '[' }}{% endcapture %}{% assign shortcodeBegins = loadnew | split: '[' %}{% if shortcodeBegins.size > 1 %}{% for shortcodeBegin in shortcodeBegins %}{% if forloop.first %}{{shortcodeBegin}}{% else %}{% assign shortcodeEnds = shortcodeBegin | split: ']' %}{% capture shortcodeFull %}{{shortcodeEnds[0]}}{% endcapture %}{% assign shortcodes = shortcodeFull | split: '"' %}{% assign variables = '' %}{% assign keys = '' %}{% for section in shortcodes %}{% capture thecycle %}{% cycle 'odd', 'even' %}{% endcapture %}{% if forloop.first %}{% if forloop.last %}{% assign template = section | prepend: 'shortcode-' %}{% include template %}{% else %}{% assign shortcodeFirst = section | split: ' ' %}{% assign template = shortcodeFirst.first | prepend: 'shortcode-' %}{% assign keys = keys | append: shortcodeFirst.last | replace: '=', ''| append: '||' %}{% endif %}{% else %}{% if forloop.last %}{% assign variables = variables | append: section %}{% assign variablesFinal = variables | split: '||' %}{% assign keysFinal = keys | replace: ' ', '' | split: '||' %}{% include template variable: variablesFinal key: keysFinal %}{% else %}{% if thecycle == 'even' %}{% assign variables = variables | append: section | append: '||' %}{% endif %}{% if thecycle == 'odd' %}{% assign keys = keys | append: section | replace: '=', ''| append: '||' %}{% endif %}{% endif %}{% endif %}{% endfor %}{{shortcodeEnds[1]}}{% endif %}{% endfor %}{% endif %}